<!doctype html><html lang="en" class="dark"><head><meta charset="utf-8"><title>Experimenting with ActivityPub: Minetest ActivityPub Bridge | Tom Casavant</title><script>// Toggle dark/light mode, inline JS to avoid any theme flicker
function toggleDarkLightMode (isInit) {
    // First time visitors
    if (!("theme" in localStorage)) {
        if (window.matchMedia("(prefers-color-scheme: light)").matches) {
            document.querySelector("html").classList.remove("dark");
            document.querySelector("html").classList.add("light");
            localStorage.theme = "light";
        } else {
            localStorage.theme = "dark";
        }
    } else {
        if (!isInit) {
            if (localStorage.theme === "light") {
                document.querySelector("html").classList.add("dark");
                document.querySelector("html").classList.remove("light");
                localStorage.theme = "dark";
            } else if (localStorage.theme === "dark") {
                document.querySelector("html").classList.add("light");
                document.querySelector("html").classList.remove("dark");
                localStorage.theme = "light";
            }
        } else {
            if (localStorage.theme === "light") {
                document.querySelector("html").classList.remove("dark");
                document.querySelector("html").classList.add("light");
            } else if (localStorage.theme === "dark") {
                document.querySelector("html").classList.remove("light");
                document.querySelector("html").classList.add("dark");
            }
        }
    }
};
toggleDarkLightMode(true);</script><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png?hash=abf568bffc03ec961018578d17170251"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png?hash=ca27d42e2179fe5e99a7675c29ba5d5f"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png?hash=9294b4b53f60108a8c2c70853180e373"><link rel="manifest" href="/assets/favicons/site.webmanifest?hash=c60f4c9f64661c53fa14a89b899f0e33" crossorigin="use-credentials"><link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg?hash=fb0e4aff65ece9c5badd549b863d756a" color="#5bbad5"><link rel="shortcut icon" href="/assets/favicons/favicon.ico?hash=194e0fefbab20e856e95f701b3514127"><link rel="canonical" href="/experimenting-with-activitypub-minetest-activitypub-bridge/"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/favicons/browserconfig.xml?hash=1f841eb91dddb70e59cf6b9df5b50d66"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Programming and Other Interests"><meta property="og:url" content="/experimenting-with-activitypub-minetest-activitypub-bridge/"><meta property="og:type" content="website"><meta property="og:title" content="Experimenting with ActivityPub: Minetest ActivityPub Bridge | Tom Casavant"><meta property="og:description" content="Programming and Other Interests"><meta property="og:image" content="/assets/images/opengraph.jpg?hash=f0cac23c7e5db7bca77b0f492a841b6d"><meta property="og:image:url" content="/assets/images/opengraph.jpg?hash=f0cac23c7e5db7bca77b0f492a841b6d"><meta name="twitter:image" content="/assets/images/opengraph.jpg?hash=f0cac23c7e5db7bca77b0f492a841b6d "><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content=""><script src="/assets/js/min.js?hash=c82d8b506728068435ed5d697d4a88b7" type="module"></script><link rel="stylesheet" href="/assets/css/site-build.css?hash=614fb2b4ca5e32b2d85c05d85b97845b"><script src="/assets/js/prism.js?hash=8d7a6cdd7b66ffd42d94ab16a49fa6a7"></script><link rel="stylesheet" href="/assets/css/prism-build.css?hash=9e22a38ffcc9d2381df212a7cf43802b"><link rel="webmention" href="https://webmention.io/tomcasavant.com/webmention"><link rel="pingback" href="https://webmention.io/tomcasavant.com/xmlrpc"><script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "Experimenting with ActivityPub: Minetest ActivityPub Bridge",
        "image": ["/assets/images/opengraph.jpg"],
        "author": {
            "@type": "Person",
            "name": "Tom Casavant"
        },
        "mainEntityOfPage": "/experimenting-with-activitypub-minetest-activitypub-bridge/",
        "datePublished": "2024-03-13T20:00:00-04:00",
        "description": "Experimenting with ActivityPub: Minetest ActivityPub Bridge Mar 13, 2024 10 minutes I’ve found the easiest way to learn how software works..."
    }</script></head><body class="dark:text-gray-300 dark:bg-dark-body bg-white text-gray-900 tracking-wider font-light overflow-x-hidden sm:overflow-auto"><div class="grid grid-flow-col grid-cols-small sm:grid-cols-regular h-screen"><div id="sidebar" class="sidebar transition-transform transform -translate-x-56 sm:translate-x-0 sm:transition-none"><div id="sidebar-contents" class="dark:bg-sidebar-dark bg-sidebar-light grid-cols-1 gap-4 pt-8 h-screen grid w-56 xl:w-72"><div><a href="/"><picture><source srcset="/assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-1024w.webp 1024w, /assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-820w.webp 820w, /assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-640w.webp 640w, /assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-320w.webp 320w" type="image/webp"><source srcset="/assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-1024w.png 1024w, /assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-820w.png 820w, /assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-640w.png 640w, /assets/images/tomface-3a8a9126dc001ed9be8052fd456a693f-320w.png 320w" type="image/png"><source><img alt="Tom Face" src="/assets/images/tomface.png" class="" height="184" width="270" decoding="async" loading="lazy"></picture></a><div class="text-center font-semibold pt-6 text-gray-400"><a href="/" class="mx-auto">Tom Casavant</a></div><div class="text-center text-sm pt-3 text-gray-400">Programming and Other Interests</div></div><div class="menu"><ul class="list-none pl-0"><li class="navitem text-center uppercase"><a href="/" class="block no-underline">Posts</a></li><li class="navitem text-center uppercase"><a href="/archive/" class="block no-underline">Archive</a></li><li class="navitem text-center uppercase"><a href="/bookmarks/" class="block no-underline">Bookmarks</a></li></ul></div><div class="row-end-5 grid grid-cols-3 xl:grid-cols-6 gap-5 mx-auto place-content-end mb-12"><a onclick="toggleDarkLightMode(false)" href="#" class="w-5 h-5"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612.001 612.001" class="lighttoggle"><title>Light mode icon</title><g><path d="M306,149.341c-86.382,0-156.661,70.278-156.661,156.661c0,86.382,70.278,156.66,156.661,156.66
            			s156.66-70.278,156.66-156.66C462.66,219.618,392.382,149.341,306,149.341z"></path><path d="M274.194,117.278h63.612c5.032,0,9.356-2.101,11.863-5.763c2.508-3.662,2.9-8.453,1.079-13.146L315.749,8.257
            			c-2.789-7.184-7.305-8.256-9.749-8.256s-6.96,1.073-9.749,8.255l-35,90.114c-1.821,4.692-1.427,9.482,1.079,13.145
            			C264.837,115.178,269.162,117.278,274.194,117.278z"></path><path d="M337.806,494.723h-63.612c-5.032,0-9.357,2.102-11.863,5.764c-2.506,3.663-2.9,8.453-1.079,13.145l34.999,90.114
            			c2.789,7.182,7.305,8.254,9.749,8.254c2.444,0,6.96-1.072,9.749-8.254l34.999-90.115c1.821-4.69,1.429-9.48-1.079-13.144
            			C347.162,496.825,342.838,494.723,337.806,494.723z"></path><path d="M127.54,190.824c2.412,5.477,7.028,8.746,12.348,8.746c3.644,0,7.257-1.608,10.174-4.526l44.981-44.98
            			c3.558-3.558,5.13-8.102,4.312-12.466c-0.819-4.362-3.928-8.028-8.532-10.056l-88.467-38.973c-2.233-0.983-4.336-1.482-6.25-1.482
            			c-3.201,0-5.959,1.415-7.568,3.882c-1.357,2.081-2.454,5.747,0.031,11.389L127.54,190.824z"></path><path d="M484.46,421.178c-2.412-5.477-7.027-8.746-12.346-8.746c-3.645,0-7.259,1.609-10.177,4.527l-44.981,44.98
            			c-3.558,3.559-5.13,8.104-4.312,12.466c0.818,4.362,3.929,8.028,8.532,10.055l88.466,38.974c2.233,0.983,4.336,1.482,6.25,1.482
            			c3.201,0,5.959-1.417,7.568-3.882c1.358-2.083,2.455-5.748-0.03-11.389L484.46,421.178z"></path><path d="M461.937,195.044c2.918,2.918,6.532,4.526,10.176,4.526c5.319,0,9.934-3.269,12.348-8.746l38.972-88.465
            			c2.486-5.643,1.389-9.308,0.031-11.389c-1.609-2.467-4.367-3.882-7.568-3.882c-1.914,0-4.017,0.499-6.251,1.483l-88.466,38.97
            			c-4.604,2.029-7.715,5.694-8.532,10.057c-0.818,4.363,0.754,8.908,4.312,12.466L461.937,195.044z"></path><path d="M150.063,416.959c-2.918-2.918-6.532-4.527-10.177-4.527c-5.319,0-9.934,3.269-12.346,8.746l-38.972,88.465
            			c-2.486,5.643-1.389,9.308-0.031,11.39c1.609,2.466,4.368,3.882,7.568,3.882c1.914,0,4.017-0.499,6.251-1.484l88.466-38.972
            			c4.604-2.028,7.715-5.694,8.532-10.056c0.818-4.362-0.753-8.907-4.312-12.466L150.063,416.959z"></path><path d="M603.745,296.251l-90.111-34.996c-1.942-0.755-3.896-1.137-5.806-1.137c-7.593,0-13.104,5.921-13.104,14.078l0.001,63.613
            			c0,8.157,5.511,14.078,13.104,14.078c1.912,0,3.866-0.382,5.806-1.136l90.112-34.999c7.182-2.79,8.254-7.306,8.254-9.751
            			C612.001,303.558,610.926,299.04,603.745,296.251z"></path><path d="M104.173,351.886c7.594,0,13.106-5.921,13.106-14.078v-63.613c0-8.157-5.511-14.078-13.106-14.078
            			c-1.912,0-3.864,0.382-5.805,1.136L8.255,296.251C1.073,299.04,0,303.556,0,306.001c0,2.444,1.072,6.96,8.255,9.752l90.111,34.996
            			C100.308,351.503,102.261,351.886,104.173,351.886z"></path></g></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 455 455" class="darktoggle"><title>Dark mode icon</title><g><polygon points="320.18,162.705 280.63,171.052 307.72,201.052 303.437,241.245 340.34,224.751 377.243,241.245 372.96,201.052 
            		400.05,171.052 360.5,162.705 340.34,127.67 	"></polygon><polygon points="440,325.677 414.091,320.208 400.883,297.253 387.675,320.208 361.766,325.677 379.513,345.33 376.708,371.661 
            		400.884,360.855 425.063,371.661 422.254,345.329 	"></polygon><path d="M218,227.5c0-89.167,51.306-166.338,126-203.64C313.443,8.6,278.978,0,242.5,0C116.855,0,15,101.855,15,227.5
            		S116.855,455,242.5,455c36.478,0,70.943-8.6,101.5-23.86C269.306,393.838,218,316.667,218,227.5z"></path></g></svg> </a><a href="https://linkedin.com/in/tfc" aria-label="Open LinkedIn profile" target="_blank" class="w-5 h-5" rel="noopener"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn icon</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg> </a><a href="https://github.com/tomcasavant" aria-label="Open GitHub profile" target="_blank" class="w-5 h-5" rel="noopener"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><link rel="me" href="https://github.com/tomcasavant"><a rel="noopener" href="https://tomkahe.com/@tom" aria-label="Open Mastodon Account" target="_blank" class="w-5 h-5"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="p-0.5"><title>Mastodon icon</title><path d="M 15.659 9.592 C 15.424 10.72 13.553 11.956 11.404 12.195 C 10.283 12.32 9.18 12.434 8.003 12.384 C 6.079 12.302 4.56 11.956 4.56 11.956 C 4.56 12.13 4.572 12.297 4.595 12.452 C 4.845 14.224 6.478 14.33 8.025 14.379 C 9.586 14.429 10.976 14.02 10.976 14.02 L 11.04 15.337 C 11.04 15.337 9.948 15.884 8.003 15.984 C 6.93 16.039 5.598 15.959 4.047 15.576 C 0.683 14.746 0.104 11.4 0.015 8.006 C -0.012 6.998 0.005 6.048 0.005 5.253 C 0.005 1.782 2.443 0.765 2.443 0.765 C 3.672 0.238 5.782 0.017 7.975 0 L 8.029 0 C 10.221 0.017 12.332 0.238 13.561 0.765 C 13.561 0.765 15.999 1.782 15.999 5.253 C 15.999 5.253 16.03 7.814 15.659 9.592 Z M 13.124 5.522 L 13.124 9.725 L 11.339 9.725 L 11.339 5.646 C 11.339 4.786 10.951 4.35 10.175 4.35 C 9.317 4.35 8.887 4.867 8.887 5.891 L 8.887 8.124 L 7.113 8.124 L 7.113 5.891 C 7.113 4.867 6.683 4.35 5.825 4.35 C 5.049 4.35 4.661 4.786 4.661 5.646 L 4.661 9.725 L 2.876 9.725 L 2.876 5.522 C 2.876 4.663 3.111 3.981 3.582 3.476 C 4.067 2.971 4.703 2.712 5.493 2.712 C 6.406 2.712 7.098 3.039 7.555 3.695 L 8 4.39 L 8.445 3.695 C 8.902 3.039 9.594 2.712 10.507 2.712 C 11.297 2.712 11.933 2.971 12.418 3.476 C 12.889 3.981 13.124 4.663 13.124 5.522 Z" style="stroke:none;stroke-miterlimit:10;fill-rule:evenodd;"></path></svg></a><link rel="me" href="https://tomkahe.com/@tom"><a href="/blog.rss" aria-label="Open RSS feed" target="_blank" class="w-5 h-5" rel="noopener"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 -256 1792 1792"><title>RSS icon</title><g transform="matrix(1,0,0,-1,212.61017,1346.1695)" id="g2991"><path d="M 384,192 Q 384,112 328,56 272,0 192,0 112,0 56,56 0,112 0,192 q 0,80 56,136 56,56 136,56 80,0 136,-56 56,-56 56,-136 z M 896,69 Q 898,41 879,21 861,0 832,0 H 697 Q 672,0 654,16.5 636,33 634,58 612,287 449.5,449.5 287,612 58,634 33,636 16.5,654 0,672 0,697 v 135 q 0,29 21,47 17,17 43,17 h 5 Q 229,883 375,815.5 521,748 634,634 748,521 815.5,375 883,229 896,69 z m 512,-2 Q 1410,40 1390,20 1372,0 1344,0 H 1201 Q 1175,0 1156.5,17.5 1138,35 1137,60 1125,275 1036,468.5 947,662 804.5,804.5 662,947 468.5,1036 275,1125 60,1138 35,1139 17.5,1157.5 0,1176 0,1201 v 143 q 0,28 20,46 18,18 44,18 h 3 Q 329,1395 568.5,1288 808,1181 994,994 1181,808 1288,568.5 1395,329 1408,67 z"></path></g></svg></a></div></div></div><div id="right-area" class="overflow-x-hidden sm:overflow-auto transition-transform transform sm:translate-x-0 sm:transition-none"><div id="top-bar" class="h-12 z-10 bg-white dark:bg-dark-heading transition-transform duration-200 ease-in sm:sticky top-0 border-gray-600 border-b-1 dark:border-transparent border-opacity-30 shadow-lg"><div class="grid grid-flow-col grid-cols-auto md:grid-cols-topbar max-w-content"><div id="mobile-top-bar" class="flex leading-12 sm:hidden col-span-2"><svg viewBox="0 0 100 80" class="block align-middle h-12 leading-12 ml-3 py-3 pt-4" onclick="slideLeftSidebar()"><rect width="60" height="7"></rect><rect y="30" width="60" height="7"></rect><rect y="60" width="60" height="7"></rect></svg><p class="flex-grow inline align-middle leading-12 text-xl text-center font-medium">Tom Casavant</p><div class="w-12"></div></div><div id="topbar-desktop-title" class="hidden sm:inline-block leading-12 align-middle ml-8 lg:ml-32 text-base text-gray-500 dark:text-gray-400 pr-8 truncate"><a href="/" class="text-indigo-900 dark:text-indigo-300 font-normal dark:font-light">Posts</a> › Experimenting with ActivityPub: Minetest ActivityPub Bridge</div><div id="search-desktop-title" class="hidden sm:hidden leading-12 align-middle ml-8 lg:ml-32 text-base text-gray-500 dark:text-gray-400"></div></div><div></div></div><div class="dark:bg-dark-body grid grid-flow-col grid-cols-auto xl:grid-cols-topbar max-w-content mb-12"><main class="min-w-0"><div class="content post border-solid border-b-1 border-gray-700 pb-6"><h1>Experimenting with ActivityPub: Minetest ActivityPub Bridge</h1><div class="mb-12 flex text-sm font-light dark:font-extralight"><div class="flex"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600.112 600.111" class="h-5 w-4 mr-2"><path d="M537.423,52.563h-59.836V21.92c0-11.83-9.591-21.42-21.42-21.42c-11.83,0-21.42,9.59-21.42,21.42v30.642H165.364V21.92
	    						c0-11.83-9.59-21.42-21.42-21.42c-11.83,0-21.42,9.59-21.42,21.42v30.642H62.687c-32.058,0-58.14,26.082-58.14,58.14v430.77
	    						c0,32.059,26.082,58.139,58.14,58.139h474.736c32.059,0,58.141-26.08,58.141-58.139v-430.77
				    			C595.564,78.645,569.482,52.563,537.423,52.563z M47.387,110.703c0-8.451,6.85-15.3,15.3-15.3h59.837v24.443
				    			c0,11.83,9.59,21.42,21.42,21.42s21.42-9.59,21.42-21.42V95.403h269.383v24.443c0,11.83,9.59,21.42,21.42,21.42
	    		    			c11.829,0,21.42-9.59,21.42-21.42V95.403h59.836c8.45,0,15.3,6.85,15.3,15.3v53.856H47.387V110.703z M552.723,541.473
	    					c0,8.449-6.85,15.301-15.3,15.301H62.687c-8.45,0-15.3-6.852-15.3-15.301V207.399h505.336V541.473z"></path><path d="M537.423,600.111H62.687c-32.334,0-58.64-26.306-58.64-58.639v-430.77c0-32.334,26.306-58.64,58.64-58.64h59.336V21.92
	    					c0-12.087,9.833-21.92,21.92-21.92c12.086,0,21.92,9.833,21.92,21.92v30.142h268.384V21.92c0-12.087,9.833-21.92,21.92-21.92
	    					s21.92,9.833,21.92,21.92v30.143h59.336c32.335,0,58.641,26.306,58.641,58.64v430.77
	    					C596.064,573.806,569.758,600.111,537.423,600.111z M62.687,53.062c-31.783,0-57.64,25.857-57.64,57.64v430.77
		    				c0,31.782,25.857,57.639,57.64,57.639h474.736c31.783,0,57.641-25.856,57.641-57.639v-430.77c0-31.783-25.857-57.64-57.641-57.64
		    				h-60.336V21.92c0-11.536-9.385-20.92-20.92-20.92s-20.92,9.385-20.92,20.92v31.142H164.864V21.92
	        				c0-11.536-9.385-20.92-20.92-20.92c-11.536,0-20.92,9.385-20.92,20.92v31.142H62.687z M537.423,557.273H62.687
	    					c-8.712,0-15.8-7.088-15.8-15.801V206.899h506.336v334.574C553.223,550.186,546.135,557.273,537.423,557.273z M47.887,207.899
	    					v333.574c0,8.161,6.639,14.801,14.8,14.801h474.736c8.16,0,14.8-6.64,14.8-14.801V207.899H47.887z M553.223,165.059H46.887
	    					v-54.356c0-8.712,7.088-15.8,15.8-15.8h60.337v24.943c0,11.535,9.385,20.92,20.92,20.92s20.92-9.385,20.92-20.92V94.903h270.383
	    					v24.943c0,11.535,9.385,20.92,20.92,20.92s20.92-9.385,20.92-20.92V94.903h60.336c8.712,0,15.8,7.088,15.8,15.8V165.059z
	    				 	M47.887,164.059h504.336v-53.356c0-8.161-6.64-14.8-14.8-14.8h-59.336v23.943c0,12.087-9.833,21.92-21.92,21.92
	    					s-21.92-9.833-21.92-21.92V95.903H165.864v23.943c0,12.087-9.833,21.92-21.92,21.92s-21.92-9.833-21.92-21.92V95.903H62.687
	    					c-8.161,0-14.8,6.639-14.8,14.8V164.059z"></path></svg> Mar 13, 2024</div><div class="flex readingtime" data-words="2,019 words"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 472.615 472.615" class="h-5 w-8 mr-2 ml-12"><path d="M472.615,205.774h-25.344c-12.797-37.99-48.686-65.462-90.935-65.462c-43.224,0-79.837,28.73-91.823,68.087
        					c-7.582-5.011-17.305-8.115-28.211-8.115c-10.903,0-20.624,3.103-28.207,8.114c-11.989-39.357-48.608-68.085-91.831-68.085
			    			c-42.249,0-78.135,27.472-90.93,65.462H0v19.692h20.925c-0.403,3.565-0.656,7.175-0.656,10.846
        					c0,52.933,43.063,95.99,95.995,95.99s96-43.058,96-95.99c0-0.552-0.073-1.085-0.083-1.635h0.069
	    	  				c0-6.952,9.88-14.702,24.053-14.702c14.178,0,24.053,7.75,24.053,14.702h0.073c-0.01,0.549-0.083,1.083-0.083,1.635
  	    					c0,52.933,43.058,95.99,95.99,95.99s96-43.058,96-95.99c0-3.671-0.253-7.281-0.656-10.846h20.935V205.774z M116.264,312.611
        					c-42.072,0-76.303-34.231-76.303-76.298c0-42.077,34.231-76.308,76.303-76.308c42.077,0,76.308,34.231,76.308,76.308
        					C192.572,278.38,158.341,312.611,116.264,312.611z M356.337,312.611c-42.067,0-76.298-34.231-76.298-76.298
        					c0-42.077,34.231-76.308,76.298-76.308c42.077,0,76.308,34.231,76.308,76.308C432.644,278.38,398.413,312.611,356.337,312.611z"></path></svg> 10 minutes <span></span></div></div><p>I’ve found the easiest way to learn how software works is to try and do something stupid with it.</p><p>ActivityPub is a decentralized social networking protocol and is the thing that lets Mastodon servers communicate with Pixelfed servers communicate with Threads communicate with Flipboard and on and on. I’ve done <a href="/the-problem-with-hashtags">a bit</a> of <a href="https://github.com/TomCasavant/tom-postmarks" target="_blank" rel="noopener">development</a> on servers that <em>use</em> ActivityPub but I have never dealt with the protocol itself.</p><p><em>until now.</em></p><p><a href="https://www.minetest.net/" target="_blank" rel="noopener">Minetest</a> is an “open source voxel game engine” and is designed to make modding very simple. Copy a few files into the <code>mods/</code> directory and suddenly you’re executing lua code from within the game. It also has an in-game chat window for communicating with other players on a given server.</p><p>But what if it could do more than that? What if you could send and receive messages from anyone and anywhere?</p><p>“But Tom,” you ask, “won’t that just clog up the chat with pointless messages from strangers?” And yes, you would be correct. But (TODO: COME UP WITH REASON WHY THIS IS USEFUL).</p><h2 id="the-plan">The Plan</h2><p>For reasons other than this project I have already been looking for an ActivityPub server that will let me generate users at-will. Most servers are designed for users so they require you to add emails and passwords and useless junk that I do not care about. Having failed to find anything that would suit my needs I created <a href="https://github.com/TomCasavant/DynamicActivityPub/" target="_blank" rel="noopener">this project</a> which would allow me to split this project into 2 parts.</p><ol><li>The Server - A basic ActivityPub server with endpoints for creating Users, Groups, and generating ActivityPub compatible messages</li><li>The Mod - A Lua minetest mod that communicates with the server, when a user sends a message upload it to the server. When the server receives a message it should send that to the chat through this mod.</li></ol><p>I had considered implementing the server in Lua so it could be built into the mod itself, but as far as I could find Minetest won’t let me create web enpoints from the mod (the <a href="https://content.minetest.net/packages/heger/webchat/" target="_blank" rel="noopener">few mods</a> where that would be useful just have a separate server that the user has to setup the files for)</p><h2 id="activitypub-implementation">ActivityPub Implementation</h2><p>This was by far the harder of the 2 portions of the project, primarily because there is <em>not</em> a lot of documentation for this protocol.</p><p>Well, that’s not entirely true. <a href="https://www.w3.org/TR/activitypub/" target="_blank" rel="noopener">w3</a> has some very detailed descriptions which were incredibly useful, but the protocol is defined slightly differently from server-to-server. So something that mastodon is able to understand and accept doesn’t necessarily show up on an <a href="https://github.com/MbinOrg/mbin" target="_blank" rel="noopener">Mbin</a> server unless certain requirements are met.</p><p>Getting a basic account to be discoverable was actually VERY easy. The base protocol calls for an endpoint for each user that returns json with a few attributes, Mastodon (and most others from what I’ve seen) require slightly more information including a <code>publicKey</code> and <code>preferredUsername</code>. A JSON request to that endpoint ends up returning something like this:</p><pre><code class="language-json">https://activitypubtesting.duckdns.org/users/testUser1
{
    "@context": [
                "https://www.w3.org/ns/activitystreams",
                "https://w3id.org/security/v1",
            ],
            "id": f"https://activitypubtesting.duckdns.org/users/testUser1",
            "inbox": f"https://activitypubtesting.duckdns.org/users/testUser1/inbox",
            "outbox": f"https://activitiypubtesting.duckdns.org/users/testUser1/outbox",
            "type": "Person",
            "name": f"Test User 1",
            "preferredUsername": f"testUser1",
            "publicKey": {
                "id": f"https://activitypubtesting.duckdns.org/users/testUser1#main-key",
                "owner": f"https://activitypubtesting.duckdns.org/users/testUser1",
                "publicKeyPem": THE PUBLIC KEY GENERATED FOR THIS USER
            },
    }
</code></pre><p>There are other optional components to this which would show up differently for different servers. If you added <code>attachments</code>, for example, Mastodon would display these as profile fields. Essentially whenever an ActivityPub server needs to obtain information about a user it uses the JSON data from this endpoint to discover where to send data to and where to pull data from.</p><p>We can also (optionally) define a webfinger endpoint. This just lets other servers find the /users/ endpoint where a user profile is located and is always at /.well-known/webfinger. You can experiment with webfingers here: <a href="https://webfinger.net/" target="_blank" rel="noopener">https://webfinger.net/</a> and just search for <code>@your_username@yourserver.com</code></p><p>Next (because it seemed far easier than posting messages) was following a user and receiving messages. All you need to receiver a message from another server is the <code>inbox</code> endpoint. There’s no special activitypub stuff we have to do here, this just receives data from a server (my assumption is that most servers do some verification steps here whenever data is received, but I have not done that). But, no messages will be sent to you <em>unless</em> you instruct other servers to talk to you.</p><p>This is where I ran into my first hurdle- cryptographic signatures. The purpose for these is to help servers have confidence that the server that’s sending you data is who they say they are. There are far more experienced people out there who can explain in detail how these work, but in simple terms this is the process:</p><ul><li>Server A generates a private key, which looks like this, then saves this and never tells anyone what this is ever:</li></ul><pre><code>-----BEGIN RSA PRIVATE KEY-----
MIIBOgIBAAJBAKj34GkxFhD90vcNLYLInFEX6Ppy1tPf9Cnzj4p4WGeKLs1Pt8Qu
KUpRKfFLfRYC9AIKjbJTWit+CqvjWYzvQwECAwEAAQJAIJLixBy2qpFoS4DSmoEm
o3qGy0t6z09AIJtH+5OeRV1be+N4cDYJKffGzDa88vQENZiRm0GRq6a+HPGQMd2k
TQIhAKMSvzIBnni7ot/OSie2TmJLY4SwTQAevXysE2RbFDYdAiEBCUEaRQnMnbp7
9mxDXDf6AU0cN/RPBjb9qSHDcWZHGzUCIG2Es59z8ugGrDY+pxLQnwfotadxd+Uy
v/Ow5T0q5gIJAiEAyS4RaI9YG8EWx/2w0T67ZUVAw8eOMB6BIUg0Xcu+3okCIBOs
/5OiPgoTdSy7bcF9IGpSE8ZgGKzgYQVZeN97YE00
-----END RSA PRIVATE KEY-----
</code></pre><ul><li>Server A then uses that private key to generate a public key (this public key is what we store on the /users/ endpoint). Which looks like this:</li></ul><pre><code>-----BEGIN RSA PUBLIC KEY-----
MEgCQQCo9+BpMRYQ/dL3DS2CyJxRF+j6ctbT3/Qp84+KeFhnii7NT7fELilKUSnx
S30WAvQCCo2yU1orfgqr41mM70MBAgMBAAE=
-----END RSA PUBLIC KEY----
</code></pre><p>*Note: I didn’t do any deep work with these, there’s a <a href="https://cryptography.io/en/latest/" target="_blank" rel="noopener">python cryptography</a> library that handles generating these</p><ul><li>Server A creates a message that says ‘@testUser1@ServerA.com wants to follow @testUser2@ServerB.com’</li><li>Before sending that message Server A retrieves our private key from before and uses it to encrypt the message.</li><li>Server B receives the encrypted message and uses the publicKey from the /users/ endpoint to decrypt it</li><li>if Server B determines that private key that signed this message is the same private key that signed the public key then it accepts it as a genuine request and will now start sending @testUser2’s posts to @testUser1’s inbox</li></ul><p>There was <em>A LOT</em> of trial and error trying to get this to work properly after building this function to test my public key I learned most of my issues were because I was incorrectly returning the publicKey in the /users/ endpoint so anything sent couldn’t be verified</p><pre><code class="language-python">def verification_testing(public_key_url, private_key, raw_signature, signature_text):
    # Load the public key JSON from the user's URL
    public_key_response = requests.get(public_key_url)
    public_key_json = public_key_response.json()['publicKey']

    # Extract the public key from the JSON
    public_key_pem = public_key_json['publicKeyPem']

    # Load the public key
    public_key = serialization.load_pem_public_key(
        public_key_pem.encode(),
        backend=crypto_default_backend()
    )
    try:
        public_key.verify(
            raw_signature,
            signature_text,
            padding.PKCS1v15(),
            hashes.SHA256()
        )
        print("Signature verification successful")
    except Exception as e:
        print(f"Signature verification failed: {e}")
</code></pre><p>After this I was now able to follow users and messages were flowing in. Fortunately for us, the process of signing messages is identical whenever a message has to be signed. Setting up followers was pretty easy (or so I thought). Essentially in the user/inbox/ endpoint we check the data received for ‘Follow’, and then process the information there (<em>again</em> you should probably be doing the cryptographic verification of their signatures but I did not). I learned during this that Mastodon requires that you send a signed ‘Accept’ message or else they won’t treat the follow as successful.</p><p>Posting messages is pretty straight-forward, you just have to loop through all the users that follow you and send the signed message to their inboxes. My create message endpoint generates the user if it doesn’t already exist in the server (since we will need to generate users for each Minetest user that exists)</p><p>The last ActivityPub type I messed around with was Group. Unlike the user (or Person) entity, there is not a very unified description of how a group functions. Through some experimentation in <a href="https://activitypub.academy/" target="_blank" rel="noopener">https://activitypub.academy</a> I learned that Lemmy’s groups just send Announce activities to mastodon (which mastodon displays as boosts), but I believe they’re a little more complex when a lemmy community talks with another server that actually supports groups.</p><p>I didn’t delve that much into it, I just need to create a Group entity that boosts all of the messages from each individual user that way you can see a feed of all the server messages.</p><h2 id="minetest">Minetest</h2><p>Don’t worry, this a much shorter topic. A minetest mod consists of 2 files (mine consists of 3), the init.lua and hte mod.conf. mod.conf just defines what a plugin is and allows you to set configuration variables. init.lua contains the lua script that interacts with the minetest server.</p><p>I also added in a json.lua file which I copied in that makes the JSON requests we have to make easier.</p><p>There’s basically just 2 things we need to do in this file</p><ul><li>Send all new messages to the activitypub server</li><li>And retrieve new messages (ideally, the server would just send message whenever a new one comes in but as I mentioned before I can’t create an enpoint in the mod)</li></ul><p>Minetest’s built-in API lets me use <code>minetest.register_on_chat_message()</code> to call a function whenever a new chat message is entered. So, I just take that message and send it to my activitypub server:</p><pre><code class="language-lua">local function new_message(player, msg)
    minetest.log("action", "Sending JSON data: " .. player)
    local data = {message = msg, username = player, groups = {"minetest"}, api_key="temporary"}
    local json_data = cjson.encode(data)
    minetest.log("action", "Sending JSON data: " .. json_data)

    local url = "http://192.168.1.75:9999/api/create_message"  -- Replace with your actual URL
 
    http.fetch({
        url = url,
        method = "POST",
        data = json_data,
        extra_headers = { "Content-Type:application/json" }
        --    ["Content-Type"] = "application/json",
        --    ["Content-Length"] = tostring(#json_data)
        --}
    }
}
</code></pre><p>The activitypub server will then post the message (and create the user) under the user’s identity.</p><p>Finally, we have to receive messages from our ActivityPub server. My solution for this was just identical to the web chat <a href="https://content.minetest.net/packages/heger/webchat/" target="_blank" rel="noopener">mod</a> where we’ll regularly poll our server and check if there are any new messages, if there are new messages we send them directly to the in-game chat.</p><pre><code class="language-lua">local function poll_messages()
    local url = "http://192.168.1.75:9999/api/get_recent_messages?last_id=" .. last_message_id
    http.fetch({
        url = url,
        method = "GET"
    }, function(response)
        if response.succeeded then
            local messages = minetest.parse_json(response.data)
            if messages then
                for _, message in ipairs(messages) do
                    -- Check if message ID is greater than last_message_id
                    if message.id &gt; last_message_id then
                        minetest.chat_send_all("[ActivityPub] " .. message.username .. ": " .. message.content)
                        last_message_id = message.id
                    end
                end
            end
        else
            minetest.log("error", "Failed to fetch messages from ActivityPub server")
        end
    end)
end

-- Call the poll_messages function periodically
minetest.register_globalstep(function(dtime)
    -- Poll every 10 seconds (adjust as needed)
    if os.time() % 10 == 0 then
        poll_messages()
    end
end)
</code></pre><p>And this is it in action:</p><video width="1200" height="300" controls=""><source src="/assets/videos/2024/minetest_demo.webm" type="video/webm">Your browser does not support the video tag.</video><h2 id="issues">Issues</h2><p>This was all to experiment with ActivityPub, but I didn’t do anything to secure the server. All private keys are stored unencrypted in a sqlite database, most of the endpoints that generate users and posts are not secured by any form of authentication.</p><p>I wasn’t able to find much information about testing an activitypub server. I’m sure there’s some way to locally run a mastodon server to test against, it feels incorrect to publicly host a website in development just to test my ActivityPub implementation.</p><p><a href="https://github.com/TomCasavant/DynamicActivityPub" target="_blank" rel="noopener">ActivityPub Server repo</a> <a href="https://github.com/TomCasavant/MinetestActivityPub" target="_blank" rel="noopener">Minetest Mod Repo</a></p><div class="block w-full h-1 border-solid border-b-1 border-gray-700"></div><div class="additions flex flex-col sm:flex-row gap-3 mt-6 px-4 w-full"><a href="/the-problem-with-hashtags/" class="flex-1"><div class="h-24 border-1 border-gray-700 leading-pagination text-center hover:bg-indigo-900 dark:hover:bg-indigo-900 hover:text-gray-200 dark:hover:text-gray-200 cursor-pointer"><span class="text-xs block mt-1 mb-3">Older</span> <span class="text-xl">The Problem with Hashtags</span></div></a><a href="" class="flex-1" target="_blank" rel="noopener"><div class="h-24 border-1 border-gray-700 leading-pagination text-center cursor-not-allowed overflow-auto"><span class="text-xs block mt-1 mb-3">Newer</span> <span class="text-xl">-</span></div></a></div><section><h2>Comments</h2><article id="webmentions" class="webmentions"><header class="webmentions__header"><h2>0 Responses</h2><p></p><form action="https://webmention.io/tomcasavant.com/webmention" method="post" class="form-webmention"><label for="form-webmention-source" class="webmentions__form-label">If you share this post, please add a link to your URL and comments will filter in here:</label><div class="webmentions__field-wrapper"><input id="form-webmention-source" type="url" name="source" placeholder="https://example.com" required="required" class="webmentions__form-field"> <input type="hidden" name="target" value="https://tomcasavant.com/experimenting-with-activitypub-minetest-activitypub-bridge/"> <input type="submit" value="Send" class="webmentions__form-submit"></div></form><p></p><p>Powered by <a href="https://indieweb.org/Webmention" target="_blank" rel="noopener">Webmentions</a> via <a href="https://webmention.io" target="_blank" rel="noopener">Webmention.io</a> and <a href="https://brid.gy" target="_blank" rel="noopener">Bridgy</a></p></header></article></section></div></main><div id="search-container" class="hidden truncate"><div class="postlist pb-8 mt-8 font-light dark:font-extralight pt-4 min-w-0"><div id="search-mobile-title" class="hidden leading-12 align-middle text-gray-500 dark:text-gray-400"></div><ul id="search-results" class="mt-3"></ul><span id="search-no-results" class="mt-3 hidden">No data found for the given query.</span><picture><source srcset="/assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-1024w.webp 1024w, /assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-820w.webp 820w, /assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-640w.webp 640w, /assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-320w.webp 320w" type="image/webp"><source srcset="/assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-1024w.png 1024w, /assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-820w.png 820w, /assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-640w.png 640w, /assets/images/algolia-f96a29a8c9a52226ae932dafa4cae840-320w.png 320w" type="image/png"><source><img src="/assets/images/algolia.png" alt="Search powered by Algolia" decoding="async" loading="lazy" height="24" width="168"></picture></div></div><aside class="hidden xl:block w-72 float-right"><div id="recents" class="ml-1 mt-12 p-2 border-solid border-l-1 border-gray-300 dark:border-gray-700 mb-16 text-gray-800 dark:text-gray-400"><span class="ml-1">Recent updates</span><ul class="list-none mt-2 pt-2 pl-2 pr-4 text-xs"><li class="truncate pb-4"><a href="/experimenting-with-activitypub-minetest-activitypub-bridge/">Experimenting with ActivityPub: Minetest ActivityPub Bridge</a></li><li class="truncate pb-4"><a href="/the-problem-with-hashtags/">The Problem with Hashtags</a></li><li class="truncate pb-4"><a href="/subjective-ranked-sorting-in-python/">Subjective Ranked Sorting in Python</a></li><li class="truncate pb-4"><a href="/ketchup-cake/">Ketchup Cake</a></li><li class="truncate"><a href="/markov-tweet-generator/">Markov Tweet Generator</a></li></ul></div><div id="toc" class="list-none ml-1 pt-2 pr-2 border-solid border-l-1 border-gray-300 dark:border-gray-700 text-gray-800 dark:text-gray-400 sticky top-8"><span class="pl-2">Content</span><div class="text-xs pt-2 pr-4"><nav class="toc"><ol><li><a href="#the-plan">The Plan</a></li><li><a href="#activitypub-implementation">ActivityPub Implementation</a></li><li><a href="#minetest">Minetest</a></li><li><a href="#issues">Issues</a></li></ol></nav></div></div></aside></div></div></div><div id="scroll" class="scroll" onclick="scrollToTop()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000" class="h-6 w-6"><g><path d="M990,699.9c0,8.1,0,16.3-8.1,24.4c-16.3,16.3-40.7,16.3-56.9,0L502,350.2L79.1,732.4c-16.3,16.3-40.7,16.3-56.9,0c-16.3-16.3-16.3-40.7,0-56.9l447.3-406.6c24.4-16.3,40.7-16.3,56.9-8.1l447.3,406.6C981.9,675.5,990,691.8,990,699.9z"></path></g></svg></div></body></html>